<div class="page-header">
  <h1><%= @mezuro_configuration.name %></h1>
</div>

<p>
  <strong> <%= t('description') %></strong>
  <%= @mezuro_configuration.description %>
</p>

<hr>

<h2>  <%= t('metrics') %> </h2>
<% if mezuro_configuration_owner? @mezuro_configuration.id %>
<%  options = @mezuro_configuration_metric_configurations.empty? ? {} : {exist_metric: true}%>
  <p data-toggle="tooltip" data-placement="left" title="Add an existing metric">
    <%= link_to t('add_metric'), mezuro_configuration_choose_metric_path(@mezuro_configuration.id, options), class: 'btn btn-info' %>
  </p>
<% end %>

<table class="table table-hover">
  <thead>
    <tr>
      <th> <%= t('metric_name_metric_configuration_new') %></th>
      <th> <%= t('code') %> </th>
      <th> <%= t('weight') %></th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% if Rails.cache.read("#{@mezuro_configuration.id}_metric_configurations").empty? %>
      <%= render partial: 'no_metric_configurations' %>
    <% else %>
      <%= render partial: 'metric_configurations', collection: Rails.cache.read("#{@mezuro_configuration.id}_metric_configurations"), as: :metric_configuration %>
    <% end %>
  </tbody>
</table>

<hr>

<p data-toggle="tooltip" data-placement="left" title="Return to configurations list">
  <%= link_to t('back'), mezuro_configurations_path, class: 'btn btn-default' %>
  <% if mezuro_configuration_owner? @mezuro_configuration.id %>
    <span data-toggle="tooltip" data-placement="left" title="Remove this configuration">
      <%= link_to t('destroy_configuration'), mezuro_configuration_path(@mezuro_configuration.id), method: :delete, data: { confirm:  t('want_destroy_configuration') }, class: 'btn btn-danger' %>
    </span>
 <% end %>
</p>
